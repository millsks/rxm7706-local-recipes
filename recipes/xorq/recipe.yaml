# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
schema_version: 1

context:
  name: xorq
  version: "0.3.0"
  python_min: '3.10'

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/xorq-${{ version }}.tar.gz
  sha256: 81da18c7359600ef9d68aa8e9491d455434d0a860a6b093182ff30960931cd47

build:
  number: 0
  noarch: python
  script: ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  python:
    entry_points:
      - xorq = xorq.cli:main

requirements:
  host:
    - python ${{ python_min }}.*
    - hatchling
    - pip
  run:
    - python >=${{ python_min }},<4.0
    - dask-core ==2025.1.0
    - attrs >=24.0.0,<26
    - pyarrow >=13.0.0,<21
    - structlog >=24.2.0,<26
    - pytest-mock >=3.14.0,<4
    - python-cityhash >=0.4.7,<1
    - pandas >=1.5.3,<3
    - pyarrow-hotfix >=0.4,<1
    - geoarrow-types >=0.2,<1
    - pythran >=0.17.0
    - atpublic >=5.1
    - parsy >=2
    - python-dateutil >=2.8.2
    - pytz >=2022.7
    - sqlglot ==25.20.2
    - toolz >=0.11
    - typing_extensions >=4.3.0
    - pyyaml >=6.0.2
    - cloudpickle >=3.1.1
    - envyaml >=1.10.211231
    - xorq-datafusion ==0.2.3
    - opentelemetry-sdk >=1.32.1
    - opentelemetry-exporter-otlp >=1.32.1
    - opentelemetry-exporter-prometheus >=0.55b1
    - prometheus_client >=0.22.1
    - cryptography >=45.0.3
    - strenum >=0.4.15
    - uv >=0.7.20
    - rich >=13.9.4

tests:
  - python:
      imports:
        - xorq
      pip_check: true
      python_version: ${{ python_min }}.*
  - requirements:
      run:
        - pip
        - python ${{ python_min }}.
    script:
      - xorq --help

about:
  summary: Data processing library built on top of Ibis and DataFusion to write multi-engine data workflows.
  homepage: https://github.com/xorq-labs/xorq
  license: Apache-2.0
  license_file: LICENSE

extra:
  recipe-maintainers:
    - rxm7706
